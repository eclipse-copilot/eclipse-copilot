<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	<extension
		point="org.eclipse.ui.startup">
		<startup
			class="org.eclipse.copilot.ui.StartUp">
		</startup>
	</extension>

	<!-- Menus registration -->
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="toolbar:org.eclipse.ui.trim.status">
			<toolbar
				id="org.eclipse.copilot.ui.statusBar">
				<command
					commandId="com.microsoft.copilot.eclipse.commands.showStatusBarMenu"
					icon="icons/github_copilot_signed_in.png"
					style="push">
				</command>
			</toolbar>
		</menuContribution>
		<menuContribution
			locationURI="menu:org.eclipse.ui.main.menu?endof=additions">
			<menu
				id="org.eclipse.copilot.ui.menuBar"
				label="Copilot"
				mnemonic="C">
				<dynamic
					id="org.eclipse.copilot.ui.dynamicMenu"
					class="org.eclipse.copilot.ui.handlers.ShowMenuBarMenuHandler">
				</dynamic>
			</menu>
		</menuContribution>
		<menuContribution locationURI="toolbar:org.eclipse.egit.ui.StagingView">
			<command
				commandId="com.microsoft.copilot.eclipse.commands.generateCommitMessage"
				icon="icons/github_copilot.png"
				id="org.eclipse.copilot.egit.generateCommitMessage"
				label="%command.generateCommitMessage.name"
				style="push">
			</command>
		</menuContribution>
		<menuContribution
			locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
			<dynamic
				id="org.eclipse.copilot.ui.dynamicContextMenu.projectExplorer"
				class="org.eclipse.copilot.ui.handlers.ShowContextMenuHandler"/>
		</menuContribution>

		<menuContribution
			locationURI="popup:org.eclipse.jdt.ui.PackageExplorer?after=additions">
			<dynamic
				id="org.eclipse.copilot.ui.dynamicContextMenu.packageExplorer"
				class="org.eclipse.copilot.ui.handlers.ShowContextMenuHandler"/>
		</menuContribution>
	</extension>
	<extension
		point="org.eclipse.ui.preferencePages">
		<page
			id="org.eclipse.copilot.ui.preferences.CopilotPreferencesPage"
			name="%page.preferencesPage.name"
			class="org.eclipse.copilot.ui.preferences.CopilotPreferencesPage">
		</page>
		<page
			id="org.eclipse.copilot.ui.preferences.McpPreferencePage"
			name="MCP"
			category="org.eclipse.copilot.ui.preferences.CopilotPreferencesPage"
			class="org.eclipse.copilot.ui.preferences.McpPreferencePage">
		</page>
		<page
			id="org.eclipse.copilot.ui.preferences.CustomInstructionPreferencePage"
			name="Custom Instructions"
			category="org.eclipse.copilot.ui.preferences.CopilotPreferencesPage"
			class="org.eclipse.copilot.ui.preferences.CustomInstructionPreferencePage">
		</page>
	</extension>
	<extension
		point="org.eclipse.core.runtime.preferences">
		<initializer
			class="org.eclipse.copilot.ui.preferences.CopilotPreferenceInitializer">
		</initializer>
	</extension>
	<extension
		point="org.eclipse.ui.views">
		<category
			name="%page.showViewPage.name"
			id="org.eclipse.copilot.chat">
		</category>
		<view
			id="com.microsoft.copilot.eclipse.ui.chat.ChatView"
			name="%page.showViewPageShowChatView.name"
			icon="icons/github_copilot.png"
			class="org.eclipse.copilot.ui.chat.ChatView"
			category="org.eclipse.copilot.chat"
			inject="true">
		</view>
	</extension>
	<!-- Commands registration -->
	<extension
		point="org.eclipse.ui.commands">
		<category
			id="com.microsoft.copilot.eclipse.ui.githubCopilot"
			name="%command.copilotForEclipsePlugin.name">
		</category>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.showStatusBarMenu"
			name="%command.showStatusBarMenu.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.signIn"
			name="%command.signInToGitHub.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.openChatView"
			name="%command.showChatView.name">
		</command>
		<command
			id="com.microsoft.copilot.eclipse.commands.signOut"
			name="%command.signOutFromGitHub.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.configureCopilotSettings"
			name="%command.configureCopilotSettings.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.triggerInlineSuggestion"
			name="%command.triggerInlineSuggestions.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.acceptFullSuggestion"
			name="%command.acceptFullSuggestion.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.acceptNextWord"
			name="%command.acceptNextWord.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.discardSuggestion"
			name="%command.discardSuggestion.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.openPreferences"
			name="%command.openPreferencesPage.name">
			<commandParameter
				id="com.microsoft.copilot.eclipse.commands.openPreferences.activePageId"
				name="%command.openPreferencesPage.parameter.name"
				values="">
			</commandParameter>
			<commandParameter
				id="com.microsoft.copilot.eclipse.commands.openPreferences.pageIds"
				name="%command.openPreferencesPage.parameter.name"
				values="">
			</commandParameter>
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.openEditKeyboardShortcuts"
			name="%command.openEditKeyboardShortcuts.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.autoShowCompletions"
			name="%command.autoShowCompletions.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.showWhatIsNew"
			name="%command.showWhatIsNew.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.upgradeCopilotPlan"
			name="%command.upgradeCopilotPlan.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.generateCommitMessage"
			name="%command.generateCommitMessage.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.enabledDoNothing"
			name="%command.enabledDoNothing.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.disabledDoNothing"
			name="%command.disabledDoNothing.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.openQuickStart"
			name="%command.openQuickStart.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.addToReferences"
			name="%command.addToReference.name">
		</command>
		<command
			categoryId="com.microsoft.copilot.eclipse.ui.githubCopilot"
			id="com.microsoft.copilot.eclipse.commands.openUrl"
			name="%command.openUrl.name">
			<commandParameter
				id="com.microsoft.copilot.eclipse.commands.openUrl.url"
				name="URL"
				values="">
			</commandParameter>
		</command>
	</extension>

	<!-- Command handlers registration -->
	<extension
		point="org.eclipse.ui.handlers">
		<handler
			class="org.eclipse.copilot.ui.handlers.ShowStatusBarMenuHandler"
			commandId="com.microsoft.copilot.eclipse.commands.showStatusBarMenu">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.SignInHandler"
			commandId="com.microsoft.copilot.eclipse.commands.signIn">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.SignOutHandler"
			commandId="com.microsoft.copilot.eclipse.commands.signOut">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.ConfigureCopilotSettingsHandler"
			commandId="com.microsoft.copilot.eclipse.commands.configureCopilotSettings">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.TriggerInlineSuggestionHandler"
			commandId="com.microsoft.copilot.eclipse.commands.triggerInlineSuggestion">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.AcceptFullSuggestionHandler"
			commandId="com.microsoft.copilot.eclipse.commands.acceptFullSuggestion">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.AcceptNextWordHandler"
			commandId="com.microsoft.copilot.eclipse.commands.acceptNextWord">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.DiscardSuggestionHandler"
			commandId="com.microsoft.copilot.eclipse.commands.discardSuggestion">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.OpenPreferencesHandler"
			commandId="com.microsoft.copilot.eclipse.commands.openPreferences">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.OpenEditKeyboardShortcutsHandler"
			commandId="com.microsoft.copilot.eclipse.commands.openEditKeyboardShortcuts">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.OpenChatViewHandler"
			commandId="com.microsoft.copilot.eclipse.commands.openChatView">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.AutoShowCompletionsHandler"
			commandId="com.microsoft.copilot.eclipse.commands.autoShowCompletions">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.ShowWhatIsNewHandler"
			commandId="com.microsoft.copilot.eclipse.commands.showWhatIsNew">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.CopilotUpgradePlanHandler"
			commandId="com.microsoft.copilot.eclipse.commands.upgradeCopilotPlan">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.GenerateCommitMessageHandler"
			commandId="com.microsoft.copilot.eclipse.commands.generateCommitMessage">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.EnabledDoNothingHandler"
			commandId="com.microsoft.copilot.eclipse.commands.enabledDoNothing">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.DisabledDoNothingHandler"
			commandId="com.microsoft.copilot.eclipse.commands.disabledDoNothing">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.OpenQuickStartHandler"
			commandId="com.microsoft.copilot.eclipse.commands.openQuickStart">
		</handler>
		<handler
			commandId="com.microsoft.copilot.eclipse.commands.addToReferences"
			class="org.eclipse.copilot.ui.handlers.AddToReferencesHandler">
		</handler>
		<handler
			class="org.eclipse.copilot.ui.handlers.OpenUrlHandler"
			commandId="com.microsoft.copilot.eclipse.commands.openUrl">
		</handler>
	</extension>

	<extension
		point="org.eclipse.ui.contexts">
		<context
			id="org.eclipse.copilot.completionAvailableContext"
			name="Completion Available"
			description="Context when completion is available"
			parentId="org.eclipse.ui.textEditorScope">
		</context>
	</extension>

	<!-- Keyboard shortcut registration -->
	<extension
		point="org.eclipse.ui.bindings">
		<key
			commandId="com.microsoft.copilot.eclipse.commands.triggerInlineSuggestion"
			contextId="org.eclipse.ui.textEditorScope"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="M1+M3+/">
		</key>
		<key
			commandId="com.microsoft.copilot.eclipse.commands.acceptFullSuggestion"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			contextId="org.eclipse.ui.textEditorScope"
			sequence="TAB">
		</key>
		<key
			commandId="com.microsoft.copilot.eclipse.commands.acceptNextWord"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			contextId="org.eclipse.copilot.completionAvailableContext"
			sequence="M1+ARROW_RIGHT">
		</key>
		<key
			commandId="com.microsoft.copilot.eclipse.commands.discardSuggestion"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			contextId="org.eclipse.ui.textEditorScope"
			sequence="ESC">
		</key>
		<key
			commandId="com.microsoft.copilot.eclipse.commands.openChatView"
			contextId="org.eclipse.ui.contexts.window"
			platform="cocoa"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="CTRL+COMMAND+I">
		</key>
		<key
			commandId="com.microsoft.copilot.eclipse.commands.openChatView"
			contextId="org.eclipse.ui.contexts.window"
			platform="win32"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="CTRL+ALT+I">
		</key>
		<key
			commandId="com.microsoft.copilot.eclipse.commands.openChatView"
			contextId="org.eclipse.ui.contexts.window"
			platform="gtk"
			schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
			sequence="CTRL+ALT+I">
		</key>
	</extension>
	<!-- Code mining registration, for block ghost text rendering -->
	<extension
		point="org.eclipse.ui.workbench.texteditor.codeMiningProviders">
		<codeMiningProvider
			class="org.eclipse.copilot.ui.completion.codemining.GhostTextProvider"
			id="org.eclipse.copilot.ui.ghostTextProvider">
		</codeMiningProvider>
	</extension>

	<!-- Register the Copilot perspective -->
	<extension
		point="org.eclipse.ui.perspectives">
		<perspective
			class="org.eclipse.copilot.ui.perspectives.CopilotPerspectiveFactory"
			icon="icons/github_copilot.png"
			id="org.eclipse.copilot.ui.perspectives.CopilotPerspective"
			name="Copilot">
		</perspective>
	</extension>

	<!-- PerspectiveExtension: Manage Chat View Position -->
	<extension
		point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension
			targetID="*">
			<editorOnboardingCommand
				id="org.eclipse.copilot.commands.openChatView">
			</editorOnboardingCommand>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.copilot.ui.perspectives.CopilotPerspective"
			editorOnboardingImage="icons/copilot_perspective.png"
			editorOnboardingText="Open a file or drop files here to open them">
			<editorOnboardingCommand
				id="org.eclipse.ui.window.showKeyAssist">
			</editorOnboardingCommand>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.ui.resourcePerspective">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				ratio="0.66"
				relationship="right"
				relative="org.eclipse.ui.editorss">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.team.ui.TeamSynchronizingPerspective">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				ratio="0.66"
				relationship="right"
				relative="org.eclipse.ui.editorss">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.jdt.ui.JavaHierarchyPerspective">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				ratio="0.66"
				relationship="right"
				relative="org.eclipse.ui.editorss">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.jdt.ui.JavaPerspective">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.ui.views.ContentOutline">
			</view>
			<view
				id="org.eclipse.ui.views.ContentOutline"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.copilot.ui.chat.ChatView">
			</view>
			<view
				id="org.eclipse.mylyn.tasks.ui.views.tasks"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.ui.views.ContentOutline">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.jdt.ui.JavaBrowsingPerspective">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				ratio="0.75"
				relationship="right"
				relative="org.eclipse.ui.editorss">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.debug.ui.DebugPerspective">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.debug.ui.VariableView">
			</view>
			<view
				id="org.eclipse.debug.ui.VariableView"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.copilot.ui.chat.ChatView">
			</view>
			<view
				id="org.eclipse.debug.ui.BreakpointView"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.copilot.ui.chat.ChatView">
			</view>
			<view
				id="org.eclipse.debug.ui.ExpressionView"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.copilot.ui.chat.ChatView">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.egit.ui.GitRepositoryExploring">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				ratio="0.66"
				relationship="right"
				relative="org.eclipse.ui.editorss">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.mylyn.tasks.ui.perspectives.planning">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.mylyn.tasks.ui.views.tasks">
			</view>
			<view
				id="org.eclipse.mylyn.tasks.ui.views.tasks"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.copilot.ui.chat.ChatView">
			</view>
		</perspectiveExtension>
		<perspectiveExtension
			targetID="org.eclipse.pde.ui.PDEPerspective">
			<view
				id="org.eclipse.copilot.ui.chat.ChatView"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.ui.views.ContentOutline">
			</view>
			<view
				id="org.eclipse.ui.views.ContentOutline"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.copilot.ui.chat.ChatView">
			</view>
			<view
				id="org.eclipse.mylyn.tasks.ui.views.tasks"
				minimized="false"
				relationship="stack"
				relative="org.eclipse.copilot.ui.chat.ChatView">
			</view>
		</perspectiveExtension>
	</extension>
	<extension point="org.eclipse.ui.intro.quicklinks">
		<command
			description="%intro.quickStart.description"
			importance="high"
			icon="icons/github_copilot_intro.png"
			id="org.eclipse.copilot.commands.openQuickStart"
			label="%intro.quickStart.label">
		</command>
	</extension>
	<extension point="org.eclipse.ui.intro.configExtension">
		<configExtension
			configId="org.eclipse.ui.intro.universalConfig"
			content="/intro/whatsnew/whatsNewExtensionContent.xml">
		</configExtension>
	</extension>
	<extension point="org.eclipse.ui.intro.quicklinks">
		<command
			description="%intro.quickStart.description"
			importance="high"
			icon="icons/github_copilot_intro.png"
			id="org.eclipse.copilot.commands.openQuickStart"
			label="%intro.quickStart.label">
		</command>
	</extension>
	<extension point="org.eclipse.e4.ui.css.swt.theme">
		<stylesheet uri="css/dark.css">
			<themeid refid="org.eclipse.e4.ui.css.theme.e4_dark"></themeid>
			<themeid
				refid="org.eclipse.e4.ui.css.theme.high-contrast">
			</themeid>
		</stylesheet>
		<stylesheet uri="css/light.css">
			<themeid refid="org.eclipse.e4.ui.css.theme.e4_default"></themeid>
			<themeid refid="org.eclipse.e4.ui.css.theme.e4_preview"></themeid>
			<themeid
				refid="org.eclipse.e4.ui.css.theme.e4_classic">
			</themeid>
		</stylesheet>
	</extension>
</plugin>
